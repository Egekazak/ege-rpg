<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vault of Enduriel</title>
    <link rel="stylesheet" href="style.css"> <!-- Link to external CSS -->
    <link rel="stylesheet" href="https://unpkg.com/panzoom/dist/panzoom.min.css">
    <link rel="icon" href="images/favicon.png" type="image/png">
</head>
<body>

    <div id="nav-placeholder"></div>
    <script>
    fetch("nav.html")
    .then(res => res.text())
    .then(html => {
        document.getElementById("nav-placeholder").innerHTML = html;

        // now that nav.html is inserted, load nav.js manually
        const script = document.createElement("script");
        script.src = "js/nav.js";
        document.body.appendChild(script);
    });
    </script>
<main>
  <section>
    <div class="decorated-h1">
      <div class="flourish-left"><span class="flourish-line-left"></span><span class="flourish-box"></span></div>
      <h1>ARMORIAL LEDGER</h1>
      <div class="flourish-right"><span class="flourish-box"></span><span class="flourish-line-right"></span></div>
    </div>
    <p><b>On PC:</b> Zoom in and out with your mouse wheel, use left click to drag the image. <b>On Mobile:</b> ... just use your hands.</p>

    <div class="fancy-divider">
      <span class="line left"></span><span class="diamond"></span><span class="line right"></span>
    </div>

    <!-- Image viewer -->
    <div class="ledger-viewer" id="viewer">
      <img id="ledger-image" src="images/heraldry-ledger-01.jpg" alt="Armorial Ledger Page 1">
    </div>

    <div class="ledger-controls">
        <button id="prev-btn">◀ PREV</button>
        <button id="next-btn">NEXT ▶</button>
    </div>

    <!-- Zoom bar for touch or no mousewheel -->
    <div class="zoom-bar">
      <label for="zoom-range">ZOOM</label>
      <input id="zoom-range" type="range" min="1" max="5" step="0.1" value="1">
    </div>
  </section>
</main>

<footer>
  <p>© 2025 Ege Kazak - All Rights Reserved</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const images = [
    "images/eastern_kingdoms_armorial_ledger_page_01.jpg",
    "images/eastern_kingdoms_armorial_ledger_page_02.jpg",
    "images/eastern_kingdoms_armorial_ledger_page_03.jpg"
  ];

  let index = 0;
  const img = document.getElementById("ledger-image");
  const viewer = document.getElementById("viewer");
  const zoomRange = document.getElementById("zoom-range");

  const panzoom = Panzoom(viewer.querySelector("img"), {
    maxScale: 5,
    contain: 'outside',
    cursor: 'grab',
  });

  // only allow scroll-zoom on desktop
  if (!('ontouchstart' in window)) {
    viewer.addEventListener("wheel", panzoom.zoomWithWheel);
  }

  // ensure first image loads
  img.src = images[index];

  // reset zoom properly when image loads
  img.addEventListener("load", () => {
    panzoom.reset();
    // ensure it starts at 100%, no zoom-in
    panzoom.zoom(1, { animate: false });
    zoomRange.value = 1;
  });

  function showPage(i) {
    index = (i + images.length) % images.length;
    img.src = images[index];
  }

  document.getElementById("next-btn").addEventListener("click", () => showPage(index + 1));
  document.getElementById("prev-btn").addEventListener("click", () => showPage(index - 1));

  // zoom bar controls
  zoomRange.addEventListener("input", (e) => {
    const scale = parseFloat(e.target.value);
    panzoom.zoom(scale, { animate: false });
  });
});
</script>

</body>
</html>
